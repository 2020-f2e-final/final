<div class="mx-auto w-11/12">
    <div class="text-main-light-blue-grey md:text-7xl sm:text-6xl text-4xl font-medium mt-8">賽車技巧</div>
    <div class="bg-main-light-blue-grey xl:h-56 lg:h-72 rounded-3xl -mt-1 hidden lg:block">
        <div class="flex flex-wrap justify-center py-3 h-full">
            <% data.tecTabTypes.forEach((type, i) => { %>
                <div class="xl:w-1/4 lg:w-1/3 pl-14 my-3 flex">
                    <div class="rounded-full w-3 h-3  my-auto bg-main-levelText"></div>
                    <div class="ml-1 text-main-levelText text-4xl font-light"><a href="techniques.html/#<%= type.tecId %>"><%= type.tecName %></a></div>
                </div>
            <% }) %>
        </div>
    </div>
    <div x-data="{ open: false }" x-cloak class="lg:hidden">
        <div class="flex sm:w-1/3 w-1/2 sm:h-10 h-8 mt-8 bg-main-light-blue-grey" @click="open = true">
            <div style="clip-path: polygon(50% 100%, 0 0, 100% 0);" class="cursor-pointer bg-main-levelText w-1/12 h-1/2 ml-2 my-auto"></div>
            <span class="w-11/12 text-main-levelText my-auto sm:text-3xl text-xl font-light">選擇技巧</span>
        </div>
    
        <ul x-show="open" @click.away="open = false">
            <% data.tecConTypes.forEach((type, i) => { %>
                <li class="text-main-levelText bg-main-light-blue-grey sm:w-1/3 w-1/2 sm:text-2xl text-lg"><a class="inline-block w-full h-full" href="techniques.html/#<%= type.tecId %>"><%= type.tecTitle%></a></li>
            <% }) %>
            <% data.tecConsTypes.forEach((type, i) => { %>
                <li class="text-main-levelText bg-main-light-blue-grey sm:w-1/3 w-1/2 sm:text-2xl text-lg"><a class="inline-block w-full h-full" href="techniques.html/#<%= type.tecId %>"><%= type.tecTitle%></a></li>
            <% }) %>
        </ul>
    </div>

    <div class="flex flex-wrap justify-center md:mb-20 mb-12">
        <% data.tecConTypes.forEach((type, i) => { %>
            <div id="<%= type.tecId %>" class="xl:px-20 lg:px-10 lg:w-1/2 md:w-3/4 sm:w-4/5 w-full xl:h-96 lg:h-72 md:h-60 sm:h-52 h-40 my-20">
                <div class="w-full h-full bg-main-light-blue-grey">
                    <div class="flex border-b-4 border-main-levelText w-3/4 xl:h-20 md:h-16 sm:h-14 h-11 mx-auto">
                        <p class="lg:w-1/2 sm:w-2/3 w-3/4 text-main-levelText lg:text-5xl sm:text-4xl text-2xl font-medium h-full xl:pt-6 pt-2"><%= type.tecTitle %></p>
                        <div class="lg:w-1/2 sm:w-1/3 w-1/4">
                            <div class="xl:h-20 lg:h-16 2xl:pl-36 xl:pl-28 lg:pl-24 md:pl-20 sm:pl-16 pl-2 xl:pt-9 lg:pt-5 md:pt-6 sm:pt-4 pt-3 pb-2">
                                <div class=" bg-main-baseBackground w-full h-full flex justify-center" style="clip-path: polygon(17% 0, 100% 0%, 83% 100%, 0% 100%);">
                                    <p class="text-white 2xl:text-2xl lg:text-xl md:text-xl sm:text-xl text-base"><%=type.tecLevel %> </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="text-main-levelText w-full  sm:text-2xl text-lg font-light text-center mt-5"><%= type.tecText%></div>
                    <div class="w-full 2xl:px-14 xl:px-11 lg:px-10 sm:px-16 px-14 xl:mt-10 sm:mt-3 mt-1 flex justify-center"> 
                        <div x-data="lazyGif()" x-cloak class="relative">
                            <img class="2xl:h-72 xl:h-64 lg:h-60 md:h-56 sm:h-48 h-36 w-full" style ="box-shadow: 2px 2px 4px 4px rgba(0, 0, 0, 0.479)" data-src="images/<%= type.tecGif %>" src="images/<%= type.tecGif.replace('.gif', '-preview.jpg') %>" alt="">
                            <div :class="{ hidden: play }" @click="onClick" class="cursor-pointer absolute top-0 left-0 w-full h-full bg-black opacity-50 flex items-center justify-center">
                                <div :class="{ 'animate-spin': loading }" class="w-16 h-16 bg-white play"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        <% }) %>
        <% data.tecConsTypes.forEach((type, i) => { %>
            <div id="<%= type.tecId %>" class="w-full flex justify-center">
                <div class="2xl:w-10/12 xl:w-11/12 lg:w-full pl-16 pr-64 h-80 my-20 relative hidden lg:block">
                    <div class="w-full h-full bg-main-light-blue-grey" style="clip-path: polygon(0 0, 88% 0, 100% 100%, 0% 100%);">
                        <div class="flex border-b-4 border-main-levelText w-1/2 h-20 ml-12">
                            <p class="w-2/3 text-main-levelText xl:text-5xl lg:text-4xl font-medium h-full pt-6"><%= type.tecTitle %></p>
                            <% if(type.tecLevel == "基礎"){ %>
                                <div class="w-1/3">
                                    <div class="h-20 2xl:pl-20 xl:pl-16 lg:pl-8 pt-8 pb-3">
                                        <div class="bg-main-baseBackground w-full h-full flex justify-center" style="clip-path: polygon(17% 0, 100% 0%, 83% 100%, 0% 100%);">
                                            <p class=" text-white text-2xl"><%= type.tecLevel %> </p>
                                        </div>
                                    </div>
                                </div>
                            <% } %>
                            <% if(type.tecLevel == "進階"){ %>
                                <div class="w-1/3">
                                    <div class="h-20 2xl:pl-20 xl:pl-16 lg:pl-8 pt-8 pb-3">
                                        <div class="bg-main-baseBackground1 w-full h-full flex justify-center" style="clip-path: polygon(17% 0, 100% 0%, 83% 100%, 0% 100%);">
                                            <p class="text-white text-2xl"><%= type.tecLevel %> </p>
                                        </div>
                                    </div>
                                </div>
                            <% } %>
                            <% if(type.tecLevel == "高級"){ %>
                                <div class="w-1/3">
                                    <div class="h-20 2xl:pl-20 xl:pl-16 lg:pl-8 pt-8 pb-3">
                                        <div class="bg-main-baseBackground2 w-full h-full flex justify-center" style="clip-path: polygon(17% 0, 100% 0%, 83% 100%, 0% 100%);">
                                            <p class="text-white text-2xl"><%= type.tecLevel %> </p>
                                        </div>
                                    </div>
                                </div>
                            <% } %>
                        </div>
                        <div class="text-main-levelText w-1/2 pl-12 xl:text-2xl lg:text-xl font-light mt-5 leading-9"><%= type.tecText%></div>
                    </div>
                    <div class="absolute right-0 top-0 w-1/2 my-7 pr-12">
                        <div x-data="lazyGif()" x-cloak class="relative">
                            <img class="relative h-64 w-full" style ="box-shadow: 2px 2px 4px 4px rgba(0, 0, 0, 0.479)" data-src="images/<%= type.tecGif %>" src="images/<%= type.tecGif.replace('.gif', '-preview.jpg') %>" alt="">
                            <div :class="{ hidden: play }" @click="onClick" class="cursor-pointer absolute top-0 left-0 w-full h-full bg-black opacity-50 flex items-center justify-center">
                                <div :class="{ 'animate-spin': loading }" class="w-16 h-16 bg-white play"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="md:w-3/4 sm:w-4/5 w-full md:h-60 sm:h-52 h-40 my-24 lg:hidden">
                    <div class="w-full h-full bg-main-light-blue-grey">
                        <div class="flex border-b-4 border-main-levelText w-3/4 md:h-16 sm:h-14 h-11 mx-auto">
                            <p class="sm:w-2/3 w-3/4 text-main-levelText  sm:text-4xl text-2xl font-medium h-full pt-2"><%= type.tecTitle %></p>
                            <% if(type.tecLevel == "基礎"){ %>
                                <div class="sm:w-1/3 w-1/4">
                                    <div class="md:pl-20 sm:pl-16 pl-2 md:pt-6 sm:pt-4 pt-3  pb-2">
                                        <div class=" bg-main-baseBackground w-full h-full flex justify-center" style="clip-path: polygon(17% 0, 100% 0%, 83% 100%, 0% 100%);">
                                            <p class="text-white md:text-xl sm:text-xl text-base"><%=type.tecLevel %> </p>
                                        </div>
                                    </div>
                                </div>
                            <% } %>
                            <% if(type.tecLevel == "進階"){ %>
                                <div class="sm:w-1/3 w-1/4">
                                    <div class="md:pl-20 sm:pl-16 pl-2 md:pt-6 sm:pt-4 pt-3 pb-2">
                                        <div class=" bg-main-baseBackground1 w-full h-full flex justify-center" style="clip-path: polygon(17% 0, 100% 0%, 83% 100%, 0% 100%);">
                                            <p class="text-white md:text-xl sm:text-xl text-base"><%=type.tecLevel %> </p>
                                        </div>
                                    </div>
                                </div>
                            <% } %>
                            <% if(type.tecLevel == "高級"){ %>
                                <div class="sm:w-1/3 w-1/4">
                                    <div class="md:pl-20 sm:pl-16 pl-2 md:pt-6 sm:pt-4 pt-3 pb-2">
                                        <div class=" bg-main-baseBackground2 w-full h-full flex justify-center" style="clip-path: polygon(17% 0, 100% 0%, 83% 100%, 0% 100%);">
                                            <p class="text-white md:text-xl sm:text-xl text-base"><%=type.tecLevel %> </p>
                                        </div>
                                    </div>
                                </div>
                            <% } %>
                        </div>
                        <div class="text-main-levelText md:mx-16 sm:mx-14 mx-10 sm:text-2xl text-lg font-light text-center sm:mt-5 mt-1"><%= type.tecText%></div>
                        <div class="w-full sm:px-16 px-14 sm:mt-3 mt-1 flex justify-center"> 
                            <div x-data="lazyGif()" x-cloak class="relative">
                                <img class="md:h-56 sm:h-48 h-36 w-full" style ="box-shadow: 2px 2px 4px 4px rgba(0, 0, 0, 0.479)" data-src="images/<%= type.tecGif %>" src="images/<%= type.tecGif.replace('.gif', '-preview.jpg') %>" alt="">
                                <div :class="{ hidden: play }" @click="onClick" class="cursor-pointer absolute top-0 left-0 w-full h-full bg-black opacity-50 flex items-center justify-center">
                                    <div :class="{ 'animate-spin': loading }" class="w-16 h-16 bg-white play"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        <% }) %>
    </div>
</div>
<script>
function lazyGif () {
    return {
        play: false,
        loading: false,
        onClick () {
            this.loading = true
            const img = this.$el.querySelector('img')
            img.onload = () => {
                this.loading = false
                this.play = true
            }
            img.src = img.getAttribute('data-src')
        }
    }
}
</script>